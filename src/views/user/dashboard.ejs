<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Bean & Brew Customer Dashboard - Manage your orders and preferences">
    <meta name="author" content="Bean & Brew">
    <meta name="theme-color" content="#C67C4E">
    
    <title>My Dashboard - Bean & Brew</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Poppins:wght@300;400;500;600;700&family=Cormorant+Garamond:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/css/bottomNav.css">
</head>
<body>
    <%- include('../partials/dashboardNavbar') %>

    <%- include('../partials/sidebar', { page: 'dashboard' }) %>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Page Header -->
        <header class="content-header">
            <div class="header-content">
                <div class="header-text">
                    <h1 class="page-title">
                        Good <%= new Date().getHours() < 12 ? 'Morning' : new Date().getHours() < 18 ? 'Afternoon' : 'Evening' %>,
                        <% if (user && user.firstName) { %>
                            <%= user.firstName %>!
                        <% } else { %>
                            Valued Customer!
                        <% } %>
                    </h1>
                    <p class="page-subtitle">Welcome back to Bean & Brew</p>
                </div>
                <% if (user && !user.isVerified) { %>
                <div class="verification-alert">
                    <i class="fas fa-exclamation-circle"></i>
                    <span>Please verify your email to unlock all features</span>
                </div>
                <% } %>
            </div>
        </header>

        <!-- Stats Overview -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon orders-icon">
                    <i class="fas fa-shopping-bag"></i>
                </div>
                <div class="stat-info">
                    <p class="stat-label">Total Orders</p>
                    <h3 class="stat-number" id="totalOrders">0</h3>
                    <span class="stat-change">All time purchases</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon cart-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="stat-info">
                    <p class="stat-label">Cart Items</p>
                    <h3 class="stat-number" id="cartItems">0</h3>
                    <span class="stat-change">Ready to checkout</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon spent-icon">
                    <i class="fas fa-peso-sign"></i>
                </div>
                <div class="stat-info">
                    <p class="stat-label">Total Spent</p>
                    <h3 class="stat-number" id="totalSpent">â‚±0</h3>
                    <span class="stat-change">Completed orders</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon pending-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <div class="stat-info">
                    <p class="stat-label">Pending Orders</p>
                    <h3 class="stat-number" id="pendingOrders">0</h3>
                    <span class="stat-change">In progress</span>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Recent Orders Card -->
            <section class="card recent-orders-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-receipt"></i> Recent Orders
                    </h2>
                    <a href="/order-history" class="btn-link">View All</a>
                </div>
                <div class="card-body">
                    <div class="orders-list" id="recentOrdersList">
                        <div class="empty-state">
                            <i class="fas fa-coffee"></i>
                            <p>No orders yet</p>
                            <a href="/menu" class="btn-primary-small">Browse Menu</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Active Cart Card -->
            <section class="card cart-preview-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-shopping-cart"></i> Your Cart
                    </h2>
                    <a href="/cart" class="btn-link">View Cart</a>
                </div>
                <div class="card-body">
                    <div class="cart-preview" id="cartPreview">
                        <div class="empty-state">
                            <i class="fas fa-cart-plus"></i>
                            <p>Your cart is empty</p>
                            <a href="/menu" class="btn-primary-small">Start Shopping</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions Card -->
            <section class="card quick-actions-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-bolt"></i> Quick Actions
                    </h2>
                </div>
                <div class="card-body">
                    <div class="quick-actions-grid">
                        <a href="/menu" class="action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #C67C4E 0%, #A66438 100%);">
                                <i class="fas fa-coffee"></i>
                            </div>
                            <span>Browse Menu</span>
                        </a>
                        <a href="/order-history" class="action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);">
                                <i class="fas fa-history"></i>
                            </div>
                            <span>Order History</span>
                        </a>
                        <a href="/cart" class="action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #10B981 0%, #059669 100%);">
                                <i class="fas fa-shopping-bag"></i>
                            </div>
                            <span>My Cart</span>
                        </a>
                        <a href="/settings" class="action-btn">
                            <div class="action-icon" style="background: linear-gradient(135deg, #6366F1 0%, #4F46E5 100%);">
                                <i class="fas fa-cog"></i>
                            </div>
                            <span>Settings</span>
                        </a>
                    </div>
                </div>
            </section>

            <!-- Account Info Card -->
            <section class="card account-info-card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-user-circle"></i> Account Information
                    </h2>
                    <a href="/settings" class="btn-link">Edit Profile</a>
                </div>
                <div class="card-body">
                    <div class="account-details">
                        <div class="account-item">
                            <i class="fas fa-user"></i>
                            <div class="account-item-content">
                                <label>Full Name</label>
                                <p><%= user && user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : 'Not set' %></p>
                            </div>
                        </div>
                        <div class="account-item">
                            <i class="fas fa-envelope"></i>
                            <div class="account-item-content">
                                <label>Email Address</label>
                                <p><%= user && user.email ? user.email : 'Not set' %></p>
                            </div>
                        </div>
                        <div class="account-item">
                            <i class="fas fa-phone"></i>
                            <div class="account-item-content">
                                <label>Phone Number</label>
                                <p><%= user && user.phone ? user.phone : 'Not set' %></p>
                            </div>
                        </div>
                        <div class="account-item">
                            <i class="fas fa-shield-alt"></i>
                            <div class="account-item-content">
                                <label>Account Status</label>
                                <p>
                                    <% if (user && user.isVerified) { %>
                                        <span class="status-badge verified"><i class="fas fa-check-circle"></i> Verified</span>
                                    <% } else { %>
                                        <span class="status-badge unverified"><i class="fas fa-exclamation-circle"></i> Unverified</span>
                                    <% } %>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <%- include('../partials/bottomNav', { page: 'dashboard' }) %>

    <script src="/js/auth/logout.js"></script>
    <script src="/js/auth/userProfile.js"></script>
    <script src="/js/user/dashboard.js"></script>
</body>
</html>

